<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ Arcade Sprite Converter Pro</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- LANGUAGE BUTTONS WITH ICONS -->
    <div class="lang-buttons">
        <button id="langEN" class="lang-btn active" onclick="changeLanguage('en')" title="English">
            <img src="icons/uk-64.png" alt="English" class="lang-icon">
        </button>
        <button id="langFR" class="lang-btn" onclick="changeLanguage('fr')" title="Fran√ßais">
            <img src="icons/France-64.png" alt="Fran√ßais" class="lang-icon">
        </button>
    </div>

    <div class="container">
        <!-- HEADER --> 
        <div class="header">
            <h1 id="pageTitle">üéÆ Arcade Sprite Converter Pro</h1>
            <p id="pageSubtitle">Convert your images to high-quality MakeCode Arcade sprites</p>
        </div>

        <!-- UPLOAD SECTION -->
        <div class="upload-section">
            <div class="drop-zone" id="dropZone">
                <input type="file" id="imageInput" accept="image/*">
                <div class="drop-content">
                    <div class="drop-icon">üìÅ</div>
                    <p>
                        <span id="uploadText">üìÅ Drag an image or</span>
                        <a href="#" class="drop-link" id="uploadLink">browse</a>
                    </p>
                    <small id="uploadInfo">PNG, JPG, GIF, WebP - Max 10MB</small>
                </div>
            </div>
        </div>

        <!-- MAIN CONTENT -->
        <div class="main-content" id="mainContent" style="display: none;">
            <div>
                <!-- PREVIEW SECTION -->
                <div class="preview-comparison">
                    <div class="preview-item">
                        <h3 id="originalLabel">üì∑ Original</h3>
                        <canvas id="beforeCanvas" width="300" height="300"></canvas>
                        <div class="preview-info" id="beforeInfo"></div>
                    </div>
                    <div class="preview-separator">‚Üí</div>
                    <div class="preview-item">
                        <h3 id="previewLabel">‚ú® Preview</h3>
                        <canvas id="afterCanvas" width="300" height="300"></canvas>
                        <div class="preview-info" id="afterInfo"></div>
                    </div>
                </div>

                <!-- OUTPUT SECTION -->
                <div class="output-section" id="outputSection" style="display: none;">
                    <div class="output-header">
                        <h3 id="outputTitle">üìã MakeCode Arcade Code</h3>
                        <div class="output-stats" id="outputStats"></div>
                    </div>
                    <textarea id="outputCode" readonly></textarea>
                    <div class="output-buttons">
                        <button class="btn btn-success" id="copyButton">üìã <span id="copyLabel">Copy Code</span></button>
                        <button class="btn btn-info" id="downloadButton">‚¨áÔ∏è <span id="downloadLabel">Download PNG</span></button>
                        <button class="btn btn-info" id="downloadJSButton">‚¨áÔ∏è <span id="downloadJSLabel">Download .js</span></button>
                    </div>
                    <div class="output-footer" id="outputHint">üí° Tip: Paste the code directly in the JavaScript tab of MakeCode Arcade</div>
                </div>

                <!-- HISTORY SECTION -->
                <div class="history-section" id="historySection" style="display: none;">
                    <h3 id="historyTitle">üìú Conversion History</h3>
                    <div class="history-list" id="historyList"></div>
                    <button class="btn btn-secondary" id="clearHistoryBtn">üóëÔ∏è <span id="clearHistoryLabel">Clear History</span></button>
                </div>
            </div>

            <!-- OPTIONS PANEL (RIGHT SIDEBAR) -->
            <div class="options-panel">
                <!-- QUICK PRESETS -->
                <div class="quick-presets">
                    <h3 id="quickPresetsLabel">‚ö° Quick Presets</h3>
                    <div class="preset-buttons">
                        <button class="preset-btn" id="presetHQ">‚≠ê <span id="presetHQLabel">High Quality</span></button>
                        <button class="preset-btn" id="presetBalance">‚öñÔ∏è <span id="presetBalanceLabel">Balanced</span></button>
                        <button class="preset-btn" id="presetFast">‚ö° <span id="presetFastLabel">Fast</span></button>
                        <button class="preset-btn" id="presetRetro">üïπÔ∏è <span id="presetRetroLabel">Retro</span></button>
                    </div>
                </div>

                <!-- PALETTE SECTION -->
                <div class="form-group">
                    <legend id="paletteLabel">üé® Color Palette</legend>
                    <select id="paletteSelect">
                        <option value="makecode" id="paletteMakeCode">MakeCode Arcade (16 colors) - Default</option>
                        <option value="gameboy" id="paletteGameBoy">Game Boy (4 colors) - Classic</option>
                        <option value="pico8" id="palettePICO8">PICO-8 (16 colors) - Indie</option>
                        <option value="commodore64" id="paletteCommodore">Commodore 64 (16 colors) - Retro</option>
                        <option value="atari2600" id="paletteAtari">Atari 2600 (128 colors) - Vintage</option>
                    </select>
                    <div class="palette-preview" id="palettePreview"></div>
                    <small id="paletteHint"></small>
                </div>

                <!-- DITHERING SECTION -->
                <div class="form-group">
                    <legend id="ditheringLabel">üî≤ Dithering Algorithm</legend>
                    <select id="ditheringSelect">
                        <option value="nearest" id="ditheringNearest">None (Fast) - Basic conversion</option>
                        <option value="floyd-steinberg" id="ditheringFloyd">Floyd-Steinberg - Best quality ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option>
                        <option value="bayer-2x2" id="ditheringBayer2x2">Bayer 2x2 - 2x2 pattern</option>
                        <option value="bayer-4x4" id="ditheringBayer4x4">Bayer 4x4 - Regular pattern ‚≠ê‚≠ê‚≠ê‚≠ê</option>
                        <option value="bayer-8x8" id="ditheringBayer8x8">Bayer 8x8 - 8x8 pattern</option>
                        <option value="atkinson" id="ditheringAtkinson">Atkinson - Fewer artifacts ‚≠ê‚≠ê‚≠ê‚≠ê</option>
                    </select>
                    <small id="ditheringHint">üí° Floyd-Steinberg ideal for photos, Bayer for pixel art</small>
                </div>

                <!-- FILTERS SECTION -->
                <div class="form-group">
                    <legend id="filtersLabel">üéõÔ∏è Image Filters</legend>

                    <div class="slider-label">
                        <span id="brightnessLabel">Brightness</span>
                        <div class="slider-controls">
                            <input type="range" class="slider" id="brightnessSlider" min="-100" max="100" value="0">
                            <span class="slider-value" id="brightnessValue">0%</span>
                        </div>
                    </div>

                    <div class="slider-label">
                        <span id="contrastLabel">Contrast</span>
                        <div class="slider-controls">
                            <input type="range" class="slider" id="contrastSlider" min="-100" max="100" value="0">
                            <span class="slider-value" id="contrastValue">0%</span>
                        </div>
                    </div>

                    <div class="slider-label">
                        <span id="saturationLabel">Saturation</span>
                        <div class="slider-controls">
                            <input type="range" class="slider" id="saturationSlider" min="-100" max="100" value="0">
                            <span class="slider-value" id="saturationValue">0%</span>
                        </div>
                    </div>

                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="grayscaleCheck">
                            <span id="grayscaleLabel">Grayscale</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="invertCheck">
                            <span id="invertLabel">Invert Colors</span>
                        </label>
                    </div>
                </div>

                <!-- RESIZE SECTION -->
                <div class="form-group">
                    <legend id="resizeLabel">üìè Resizing</legend>

                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="resizeMode" value="fitWidth" checked>
                            <span id="resizeFitWidthLabel">Fit to width (16px)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="resizeMode" value="fitHeight">
                            <span id="resizeFitHeightLabel">Fit to height (16px)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="resizeMode" value="custom">
                            <span id="resizeCustomLabel">Custom size</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="resizeMode" value="original">
                            <span id="resizeOriginalLabel">Original size (limited to 160√ó120)</span>
                        </label>
                    </div>

                    <div class="custom-inputs" id="customSizeInputs" style="display: none;">
                        <label id="widthLabel">Width: <input type="number" id="customWidth" min="1" max="160" value="16"> <span id="pxLabel">px</span></label>
                        <label id="heightLabel">Height: <input type="number" id="customHeight" min="1" max="120" value="16"> <span id="pxLabel2">px</span></label>
                    </div>
                </div>

                <!-- ACTION BUTTONS -->
                <div class="action-buttons">
                    <button class="btn btn-primary" id="convertBtn" disabled>üîÑ <span id="convertLabel">Convert</span></button>
                    <button class="btn btn-secondary" id="resetBtn">‚Üª <span id="resetLabel">Reset</span></button>
                </div>
            </div>
        </div>
    </div>

    <!-- SPINNER -->
    <div class="spinner" id="spinner" style="display: none;">
        <div class="spinner-content">
            <div class="spinner-ring"></div>
            <p id="spinnerText">Converting...</p>
        </div>
    </div>

    <!-- TOAST NOTIFICATION -->
    <div class="toast" id="toast" style="display: none;"></div>

    <!-- FOOTER -->
    <div class="footer">
        <p id="footerText">üéÆ Arcade Sprite Converter - Convert your images to MakeCode Arcade sprites</p>
        <a href="https://monsieurnerd.com"><img src="icons/Logo-Mr-Nerd-black.png" id="logo-nerd"></a>
        <p id="footerVersion">Version 2.0 | Hosted on GitHub Pages |</p>
        <p id="footerInspired">Inspired by Kristian Pedersen</p>
    </div>

    <!-- SCRIPTS -->
    <script src="i18n.js"></script>
    <script src="converter.js"></script>
    <script src="app.js"></script>
</body>
</html>
